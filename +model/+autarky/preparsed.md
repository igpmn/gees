% [IrisToolbox] autogenerated preparsed model source code 07-Sep-2023 15:17:18
%
% * model-source/demography.md
% * model-source/households.md
% * model-source/production.md
% * model-source/monetary.md
% * model-source/fiscal.md
% * model-source/open.md
% * model-source/commodity.md
% * model-source/globals.md
% * model-source/wrapper-autarky.md


!variables

    "Total population" nn
    "Total population, Y/Y" roc_nn
    "Area specific component in total population" nr
    "Working age population" nw
    "Labor force" nf


!log-variables !all-but


!parameters(:demography :steady)

    "S/S Population, Relative to global population component !! $\mathit{nr}_\ss$" ss_nr
    "S/S Share of working age population in total population !! $\tratio{\mathit{nw}}{\mathit{nn}}_\ss$" ss_nw_to_nn
    "S/S Labor participation rate !! $\tratio{\mathit{nf}}{\mathit{nw}}_\ss$" ss_nf_to_nw


!parameters(:demography :dynamic)

    "A/R Total population relative to global population component !! $\rho_\mathit{nr}$" rho_nr
    "A/R Share of working age population in total population !! $\rho_\mathit{nw}$" rho_nw
    "A/R Labor participation rate !! $\rho_\mathit{nf}$" rho_nf


!shocks

    "Shock to relative population component" shk_nr
    "Shock to share of working age population" shk_nw_to_nn
    "Shock to labor participation rate" shk_nf_to_nw


!equations

    "Total population relative to global population component"
    log(nr) = rho_nr * log(nr{-1}) + (1-rho_nr) * log(ss_nr) + shk_nr !! nr = ss_nr;


    "Total population"
    nn = nr * gg_nt;


    "Total population, Y/Y"
    roc_nn = nn / nn{-1} !! roc_nn = gg_ss_roc_nt;


    "Share of working age population"
    nw/nn = + rho_nw * nw{-1}/nn{-1} + (1-rho_nw) * ss_nw_to_nn + shk_nw_to_nn !! nw = ss_nw_to_nn * nn;


    "Labor participation rate"
    nf/nw = + rho_nf * nf{-1}/nw{-1} + (1-rho_nf) * ss_nf_to_nw + shk_nf_to_nw !! nf = ss_nf_to_nw * nw;


!variables(:households)

    "Private consumption" ch
    "Per-capita private consumption" ch_to_nn
    "Private consumption reference level" ref_ch_to_ch
    "Real discount factor" rdf
    "Per-worker labor supply" nh
    "Private investment" ih
    "Uncertainty in capital" zk
    "Uncertainty in profits" zy
    "Ex-post return on capital" rk
    "Production capital" k
    "Production capital services" uk
    "Portfolio of claims on production capital" kk
    "Household net worth" netw
    "Nominal wage rate" w
    "Real labor income" rli

    "Price of production capital" pk
    "Price of production capital services" pu
    "Real consumer wage rate" w_to_pc
    "Target nominal wage rate" ww

    "Nominal wage rate, Y/Y" roc_w
    "Household investment, Y/Y" roc_ih
    "Production capital, Y/Y" roc_k


!log-variables !all-but

    ref_ch_to_ch


!parameters(:households :steady)

    "S/S Uncertainty discount factor on capital !! $\mathit{zk}_\mathrm{ss}$" ss_zk
    "S/S Uncertainty discount factor on production cash flows !! $\mathit{zy}_\mathrm{ss}$" ss_zy
    "Household discount factor !! $\beta$" beta
    "Depreciation of production capital !! $\delta$" delta
    "Inverse elasticity of labor supply !! $\eta$" eta
    "Utility location parameter of labor supply !! $\eta_0$" eta0
    "Intercept in current wealth utility !! $\nu_0$" nu_0
    "Slope of current wealth utility !! $\nu_1$" nu_1
    "Level parameter in cost of utilization of production capital !! $\upsilon_0$" upsilon_0
    "Inverse elasticity of cost of utilization of production capital !! $\upsilon_1$" upsilon_1


!parameters(:households :dynamic)

    "A/R in uncertainty discount factor on capital !! $\rho_\mathit{zk}$" rho_zk
    "A/R in uncertainty discount factor on production cash flows !! $\rho_\mathit{zy}$" rho_zy
    "Point of reference in consuptions switch !! $\chi$" chi
    "Past consumption in reference consumption parameter !! $\chi_\mathit{ch}$" chi_ch
    "Current income in reference consumption parameter !! $\chi_\mathit{curr}$" chi_curr
    "Type 1 investment adjustment cost parameter !! $\xi_\mathit{ih,1}$" xi_ih1
    "Type 2 investment adjustment cost parameter !! $\xi_\mathit{ih,2}$" xi_ih2
    "Pressure relief valve for interest rate lower bound !! $\theta_\mathir{rh}$" theta_rh
    "Adjustment cost in wage setting" xi_w


!shocks(:households)

    "Shock to intertemporal preferences" shk_beta
    "Shock to private consumption" shk_ch
    "Shock to private investment" shk_ih
    "Shock to wage rate" shk_w
    "Shock to current income" shk_curr
    "Shock to uncertainty discount factor on capital" shk_zk
    "Shock to uncertainty discount factor on production cash flows" shk_zy


!equations(:households)


    "Optimal choice of household consumption"
    vh*pc*(ch - chi*ref_ch_to_ch*ch)*exp(-shk_ch) = nn*(1 - chi*&ref_ch_to_ch) !! vh*pc*ch = nn;

    "Point of reference in household consumption" 
    ref_ch_to_ch = [ chi_curr*((w*nh*nf - txls2_to_nc*pc*ch))/pc + chi_ch*ch{-1}*gg_ss_roc_a ] / ch;

    "Optimal choice of net position with local financial sector"
    vh = beta*vh{+1}*rh + nn/(pc*ch)*[ nu_1*(pc*ch/netw - nu_0) - gg_nu ] * exp(shk_beta) !! 1 = beta*rh/gg_ss_roc_a/ss_roc_pc + nu_1*nch_to_netw_minus_nu_0 - gg_nu;

    "Auxiliary equation for steady-state calibration of nu_0"
    nch_to_netw_minus_nu_0 = pc * ch / netw - nu_0;

    rdf = beta*vh{+1}*pc{+1}/(vh*pc);

    "Risk adjusted household rate"
    rh = r + theta_rh*(unc_r - r) + zh;

    "Current net worth of households"
    netw = kk + dg_to_ngdp*ngdp + nfa_to_ngdp*ngdp;

    "Uncertainty discount factor on capital"
    log(zk) = rho_zk*log(zk{-1}) + (1-rho_zk)*log(ss_zk) + shk_zk !! zk = ss_zk;

    "Uncertainty discount factor on production cash flows"
    log(zy) = rho_zy*log(zy{-1}) + (1-rho_zy)*log(ss_zy) + shk_zy !! zy = ss_zy;

    "Real labor income"
    rli = w*nh*nf / pc; 


    "Optimal choice of per-worker hours worked"
    vh * ww = eta0 * nh^eta;

    "Real consumer wage rate"
    w_to_pc = w / pc;

    "Wage rigidities"
    log(ww) - log(w) = + xi_w*(log(roc_w) - log(roc_w{-1})) - beta/&roc_w*xi_w*(log(roc_w{+1}) - log(roc_w)) + shk_w !! w = ww;


    "Optimal choice of investment in local production capital"
    pk * exp(shk_ih) = pih*[ 1 + xi_ih1*(log(ih) - log((&ih/&k*&roc_k)*k{-1})) + xi_ih2*(log(ih/ih{-1}/&roc_ih) - beta*log(ih{+1}/ih/&roc_ih)) ] !! pk = pih;

    "Accumulation of production capital"
    k = (1-delta)*k{-1} + ih;

    "Definition of utilized production capital"
    uk = u * k;

    "Optimal choice of utilization rate of production capital"
    py * upsilon_0 * u^upsilon_1 = pu;

    "Auxiliary equation for steady-state calibration of upsilon_0"
    upsilon_1_py_to_pu = upsilon_0 * py / pu;

    "Ex-post return on capital"
    rk*pk{-1} = u{-1}*pu{-1}*rh{-1} + (1-delta)*pk;


        roc_w = w / w{-1};
    
        roc_ih = ih / ih{-1};
    
        roc_k = k / k{-1};


!variables(:production)

    "Area specific productivity component" ar
    "Shadow value of household budget constraing" vh
    "Price of private consumption" pc
    "Price of private investment" pih
    "Domestic intermediate inputs" yz
    "Stage T-3 output" y3
    "Stage T-2 output" y2
    "Stage T-1 output" y1
    "Stage T-0 output" y
    "Price of stage T-3 output" py3
    "Price of state T-2 output" py2
    "Price of state T-1 output" py1
    "Price of stage T-0 output" py0
    "Price of commodity input into production" pq

    "Commodity input into production" mq
    alpha_mq, alpha_y2
    "Variable labor input into production" nv

    "Nominal GDP" ngdp
    "Real GDP index, Y/Y" roc_gdp
    "Per-capita real GDP index, Y/Y" roc_gdp_to_nn

    "Price of domestic production" py
    "Nominal household rate, LCY" rh

    "Price of final domestic output, Y/Y" roc_py
    "Price of final domestic output, Y/Y, Point of reference" ref_roc_py
    "Price of consumer goods, Y/Y" roc_pc
    "Utilization rate of production capital" u
    "Stage T-3 output, Y/Y" roc_y3
    "Variable labor, Y/Y" roc_nv

    "Auxiliary variable for steady-state calibration of upsilon_0" upsilon_1_py_to_pu
    "Auxiliary equation for steady-state calibration of nu_0" nch_to_netw_minus_nu_0


!log-variables !all-but

    zh, nch_to_netw_minus_nu_0


!parameters(:production :steady)

    "S/S Area specific productivity component !! $\mathit{ar}_\ss$" ss_ar

    "Share of overhead labor !! $\gamma_\mathit{n0}$" gamma_n0
    "Share of intermediate imports in stage T-3 production !! $\gamma_m$" gamma_m
    "Share of capital services in stage T-2 production !! $\gamma_\mathit{uk}$" gamma_uk
    "Share of commodity inputs in stage T-1 production !! $\gamma_mq$" gamma_mq
    "Share of roundabout intermediates in stage T-0 production !! $\gamma_\mathit{yz}$" gamma_yz

    "Monopoly power (markup) of local producers !! $\mu_\mathit{py}$" mu_py
    "Markup to cover overhead labor !! $\mu_{y3}$" mu_y3
    a_y1


!parameters(:production :dynamic)

    "Autoregression in area specific productivity component !! $\rho_\mathit{ar}$" rho_ar
    "Weight on S/S inflation in inflation indexation !! $\zeta_\mathit{py}$" zeta_py
    "Stage T-2 input factor adjustment cost parameter !! $\xi_{y2}$" xi_y2
    "Stage T-1 input factor adjustment cost parameter !! $\xi_{y1}$" xi_y1
    "Price adjustment cost parameters !! $\xi_\mathit{py}$" xi_py
    rho_alpha


!shocks(:production)

    "Shock to area specific productivity component" shk_ar
    "Shock to final price setting" shk_py


!equations(:production)


    "Area-specific relative productivity component"
    log(ar) = + rho_ar * log(ar{-1}) + (1 - rho_ar) * log(ss_ar) + shk_ar !! ar = ss_ar;


    "Definition of variable labor input"
    nv = (nh - gamma_n0*&nh) * nf;

    "Stage T-3 production function"
    y3 = (my/gamma_m)^gamma_m * ([ar * gg_a * nv]/(1-gamma_m))^(1-gamma_m);

    "Demand for intermediate imports"
    gamma_m * py3 * y3 = (pmm * gg_dmm) * my * [1 + xi_y3*((log(my/y3)-log(my{-1}/y3{-1}))-&rdf*(log(my{+1}/y3{+1})-log(my/y3)))] !! gamma_m * py3 * y3 = (pmm * gg_dmm) * my;

    "Demand for labor"
    (1-gamma_m) * py3 * y3 = mu_y3 * w * nv * [1 + xi_y3*((log(nv/y3)-log(nv{-1}/y3{-1})-log(&roc_nv/&roc_y3))-&rdf*(log(nv{+1}/y3{+1})-log(nv/y3)-log(&roc_nv/&roc_y3)))] !! (1-gamma_m) * py3 * y3 = mu_y3 * w * nv;


    y2 = (uk/gamma_uk)^gamma_uk * (y3/(1-gamma_uk))^(1-gamma_uk);

    gamma_uk * py2 * y2 = pu * uk * [1 + xi_y2*((log(uk/y2)-log(uk{-1}/y2{-1}))-&rdf*(log(uk{+1}/y2{+1})-log(uk/y2)))] !! gamma_uk * py2 * y2 = pu * uk;

    (1-gamma_uk) * py2 * y2 = py3 * y3 * [1 + xi_y2*((log(y3/y2)-log(y3{-1}/y2{-1}))-&rdf*(log(y3{+1}/y2{+1})-log(y3/y2)))] !! (1-gamma_uk) * py2 * y2 = py3 * y3;


    py1 = alpha_y2*py2 + alpha_mq*pq !! y1 = a_y1 * (y2/(1-gamma_mq))^(1-gamma_mq) * (mq/gamma_mq)^gamma_mq ;

    "Demand for Y2 inputs"
    alpha_y2 * y1 = y2;

    "Demand for commodity inputs"
    alpha_mq * y1 = mq;

    "Input share parameter for Y2"
    alpha_y2 = + rho_alpha * alpha_y2{-1} + (1 - rho_alpha) * (1-gamma_mq)*(&py1/&py2) !! alpha_y2 = (1-gamma_mq)*(py1/py2) ;

    "Input share parameter for commodity"
    alpha_mq = + rho_alpha * alpha_mq{-1} + (1 - rho_alpha) * gamma_mq*(&py1/&pq) !! alpha_mq = gamma_mq*(py1/pq) ;


    y = y1;
    py0 = py1;
    yz = 1;


    mu_py*py0*exp(shk_py) = py*[1 + (mu_py-1)*xi_py*(log(roc_py/ref_roc_py) - beta*gg_zy*zy*log(roc_py{+1}/ref_roc_py{+1}))] !! py = mu_py * py0;

    ref_roc_py = roc_py{-1}^(1-zeta_py) * &roc_py^zeta_py;

    pc = py;
    pih = py;


    y = ch + cg + ih + yxx;


        roc_cg = cg / cg{-1};
    
        roc_pc = pc / pc{-1};
    
        roc_py = py / py{-1};
    
        roc_y3 = y3 / y3{-1};
    
        roc_nv = nv / nv{-1};


    "Per-capita private consumption"
    ch_to_nn = ch / nn;

    "Nominal GDP"
    ngdp = pc*ch + pih*ih + pc*cg + pxx*xx - pmm*mm + pq*(xq - mq);

    "Real GDP index, Y/Y"
    roc_gdp = + (pc*ch/ngdp + pc{-1}*ch{-1}/ngdp{-1})/2 * ((ch)/(ch{-1})) + (pih*ih/ngdp + pih{-1}*ih{-1}/ngdp{-1})/2 * ((ih)/(ih{-1})) + (pc*cg/ngdp + pc{-1}*cg{-1}/ngdp{-1})/2 * ((cg)/(cg{-1})) + (pxx*xx/ngdp + pxx{-1}*xx{-1}/ngdp{-1})/2 * ((xx)/(xx{-1})) - (pmm*mm/ngdp + pmm{-1}*mm{-1}/ngdp{-1})/2 * ((mm)/(mm{-1})) + (pq*xq/ngdp + pq{-1}*xq{-1}/ngdp{-1})/2 * ((xq)/(xq{-1})) - (pq*mq/ngdp + pq{-1}*mq{-1}/ngdp{-1})/2 * ((mq)/(mq{-1})) !! roc_gdp = gg_ss_roc_a * gg_ss_roc_nt;

    "Per-capita real GDP index, Y/Y"
    roc_gdp_to_nn = roc_gdp / roc_nn;


!postprocessor(:production)

    nch_to_ngdp = pc * ch / ngdp;
    nih_to_ngdp = pih * ih / ngdp;
    nkh_to_ngdp = pk * k / ngdp;
    curr_to_ngdp = ((w*nh*nf - txls2_to_nc*pc*ch)) / ngdp;
    gdp = gdp{-1} * roc_gdp;


!log-variables !all-but

    nch_to_ngdp
    nih_to_ngdp
    nkh_to_ngdp
    curr_to_ngdp


!variables(:monetary)

    "Nominal short-term rate, LCY" r
    "Monetary policy reaction term" react
    "Unconstrained nominal short-term rate, LCY" unc_r
    "Nominal short-term rate for interest parity, LCY" rip 


!parameters(:monetary :steady)

    "S/S Price of private consumption, Y/Y !! $\roc{\mathit{pc}}_\ss$" ss_roc_pc
    "Switch for lower bound on short-term rate !! $\mathit{floor}$" floor


!parameters(:monetary :dynamic)

    "A/R in policy rate !! $\rho_r$" rho_r 
    "Monetary policy reaction to CPI !! $\psi_\mathit{pc}$" psi_pc 
    "Monetary policy reaction to nominal exchange rate !! $\psi_e$" psi_e
    "Monetary policy reaction to real economic activity !! $\psi_\mathit{nh}$" psi_nh
    "Pressure relief valve for interest rate lower bound !! $\theta_\mathir{rip}$" theta_rip


!shocks(:monetary)

    "Shock to monetary policy reaction function" shk_r


!log-variables !all-but

    react


!equations(:monetary)

    "Monetary policy reaction function"
    log(unc_r) = + rho_r * log(r{-1}) + (1 - rho_r) * [ log(&unc_r) + react ] + shk_r !! pc = pc{-1} * ss_roc_pc;


    "Monetary policy reaction term"
    react = + psi_pc * (log(roc_pc{+1}) - log(ss_roc_pc)) + psi_e * (log(roc_e) - log(&roc_e)) + psi_nh * (log(nh{+1}) - log(&nh)) !! react = 0;


    "Zero floor constraint on policy rate"
    r = floor*max(1, unc_r) + (1-floor)*unc_r !! r = unc_r;

    rip = r + theta_rip*(unc_r - r) !! rip = r;


!variables

    "Government debt interest rate" rg
    "Government consumption" cg
    "Government debt to GDP ratio" dg_to_ngdp
    "Net lump-sum tax 1 to consumption ratio" txls1_to_nc
    "Net lump-sum tax 2 to consumption ratio" txls2_to_nc
    "Government consumption, Y/Y" roc_cg
    "Import tariff rate" trm


!log-variables !all-but

    txls1_to_nc, txls2_to_nc, dg_to_ngdp, trm


!parameters(:fiscal :steady)

    "S/S Government debt to GDP ratio !! $\tratio{\mathit{dg}}{\mathit{ngdp}}_\ss$" ss_dg_to_ngdp
    "S/S Government consumption to GDP ratio !! $\tratio{\mathit{ncg}}{\mathit{ngdp}}_\ss$" ss_ncg_to_ngdp
    "S/S General import tariff rate !! $\mathit{trm}_\ss$" ss_trm


!parameters(:fiscal :dynamic)

    "Response in government consumption to government debt !! $\tau_\mathit{cg}$" tau_cg
    "Response in type 1 lump-sum tax rate to government debt !! $\tau_{\mathit{txls},1}$" tau_txls1
    "Autoregression in government consumption !! $\rho_\mathit{cg}$" rho_cg
    "Autoregression in type 1 lump-sum tax rate !! $\rho_{\mathit{txls},1}$" rho_txls1
    "Autoregression in type 2 lump-sum tax rate !! $\rho_{\mathit{txls},2}$" rho_txls2
    "Autoregression in generate import tariff rate !! $\rho_\mathit{trm}$" rho_trm


!shocks

    "Shock to government consumption" shk_cg
    "Shock to type 1 lump-sum taxes" shk_txls1
    "Shock to type 2 lump-sum taxes" shk_txls2
    "Shock to general import tariff rate" shk_trm


!equations

    rg = r;

    
    "Dynamic fiscal budget constraint"
    dg_to_ngdp*ngdp = + rg{-1}*dg_to_ngdp{-1}*ngdp{-1} + pc*cg - (txls1_to_nc + txls2_to_nc) * pc*ch - (pmm - fob_pmm) * mm;


    "Fiscal reaction function for government consumption"
    log(cg) = + rho_cg * log(cg{-1}*&roc_cg) + (1 - rho_cg) * log(ss_ncg_to_ngdp*ngdp/pc) - tau_cg * (dg_to_ngdp{+1} - ss_dg_to_ngdp) + shk_cg !! pc*cg = ss_ncg_to_ngdp*ngdp;


    "Fiscal reaction function for type 1 net lump-sum taxes"
    txls1_to_nc = + rho_txls1 * txls1_to_nc{-1} + (1-rho_txls1) * &txls1_to_nc + tau_txls1 * (dg_to_ngdp{+1} - ss_dg_to_ngdp) + shk_txls1 !! dg_to_ngdp = ss_dg_to_ngdp;


    "Fiscal reaction function for type 2 net lump-sum taxes"
    txls2_to_nc = + rho_txls2*txls2_to_nc{-1} + shk_txls2 !! txls2_to_nc = 0;


    "Fiscal reaction function for import tariffs rate"
    trm = + rho_trm * trm{-1} + (1 - rho_trm) * ss_trm + shk_trm !! trm = ss_trm;


!variables(:open)

    "Non-commodity imports" mm
    "Price of non-commodity imports" pmm
    "Price of non-commodity imports, FOB" fob_pmm
    "Imports for non-commodity exports" mxx
    "Imports for domestic production" my

    "Domestic content of non-commodity exports" yxx
    "Non-commodity exports" xx
    "Commodity exports" xq
    "Price of non-commodity exports" pxx

    "Net foreign fixed-income assets to GDP Ratio" nfa_to_ngdp
    "Primary income rate on net foreign fixed-income assets" rnfa
    "Checksum for net foreign fixed-income assets to GDP ratio" nfa_to_ngdp_checksum
    "Nominal exchange rate" e
    "Expectations of nominal exchange rate" exp_e
    "Nominal Exchange Rate, Y/Y" roc_e
    "BOP CA corporate equity primary income to GDP ratio" bpceq_to_ngdp
    "BOP FA corporate equity transactions to GDP ratio" bpfeq_to_ngdp
    "Price of non-commodity exports, Reference ccy" pxx_rcy
    "Value of non-commodity exports, Reference ccy" nxx_rcy
    "Net claims of financial sector on households" bh_to_ngdp
    "Non-commodity imports to GDP ratio" nmm_to_ngdp
    "Non-commodity exports to GDP ratio" nxx_to_ngdp
    "Net commodity exports to GDP ratio" netxq_to_ngdp
    "Net non-commodity exports to GDP ratio" netxx_to_ngdp

    "Country credit risk" zh
    "Autonomous component in country credit risk" zh_aut


!log-variables !all-but

    nfa_to_ngdp
    nfa_to_ngdp_checksum
    bpfeq_to_ngdp
    bpceq_to_ngdp
    bh_to_ngdp
    nmm_to_ngdp
    nxx_to_ngdp
    netxq_to_ngdp
    netxx_to_ngdp
    zh_aut


!parameters(:open :steady)

    "Import intensity of non-commodity exports !! $\gamma_\mathit{mxx}$" gamma_mxx
    "Acceleration in exportable productivity !! $\gamma_\mathit{xx}$" gamma_xx
    "Elasticity of household risk function wrt NFA !! $\theta_1$" theta_1
    "Curvature of household risk function wrt NFA !! $\theta_2$" theta_2
    "Share of local commodity production in world commodity production !! $\lambda$" lambda
    "S/S Autonomous component in country credit risk !! $\mathit{zh}^\mathrm{aut}_\ss$" ss_zh_aut


!parameters(:open :dynamic)

    "A/R Autonomous component in country credit risk !! $\rho_{\mathit{zh}}^\mathrm{aut}$" rho_zh_aut
    "Weight on model-consistent expectations in exchange rate !! $\zeta_e$" zeta_e
    "Adjustment cost parameter in stage t-3 production !! $\xi_{y3}$" xi_y3


!shocks(:open)

    "Interest parity shock" shk_e
    "Shock to country credit risk" shk_zh
    "Shock to autonoumous component in country credit risk" shk_zh_aut


!equations(:open)


    "Distribution of non-commodity imports"
    mm = my + mxx;


    "Commodity endowment"
    xq = lambda * gg_q;

    "Commodity prices in local currency"
    pq = gg_pq * e;


    "Non-commodity export production function"
    xx = ar^gamma_xx * (yxx/(1-gamma_mxx))^(1-gamma_mxx) * (mxx/gamma_mxx)^gamma_mxx;

    "Demand for local content in export production"
    (1-gamma_mxx) * pxx * xx = py * yxx;

    "Demand for re-exports"
    gamma_mxx * pxx * xx = (pmm * gg_dmm) * mxx;


    "Balance of payments transactions"
    nfa_to_ngdp * ngdp - nfa_to_ngdp{-1} * ngdp{-1} = + bpfeq_to_ngdp * ngdp + (rnfa - 1) * nfa_to_ngdp{-1} * ngdp{-1} + bpceq_to_ngdp*ngdp + pxx * xx - fob_pmm * mm + netxq_to_ngdp * ngdp + nfa_to_ngdp_checksum * ngdp;

    "Local interest spread"
    zh = + zh_aut + theta_1 * (1/theta_2)*[ exp(-theta_2*nfa_to_ngdp*ngdp/(pk*k)) - 1 ] + shk_zh;

    "Autonomous component in local interest spread"
    zh_aut = + rho_zh_aut * zh_aut{-1} + (1 - rho_zh_aut) * ss_zh_aut + shk_zh_aut !! zh_aut = ss_zh_aut;


    "Net balance sheet of local financial sector"
    bh_to_ngdp + dg_to_ngdp + nfa_to_ngdp = 0;


    "Nominal Exchange Rate Expectations"
    exp_e = e{+1}^zeta_e * (e*&roc_e)^(1-zeta_e);


    roc_e = e / e{-1};


    "Price of non-commodity exports in reference currency"
    pxx_rcy = pxx / e;

    "Value of non-commodity exports in reference currency"
    nxx_rcy = pxx_rcy * xx;


    "Total imports to GDP ratio"
    nmm_to_ngdp = fob_pmm*mm / ngdp;
    nxx_to_ngdp = pxx*xx / ngdp;
    netxq_to_ngdp = pq*(xq - mq) / ngdp;
    netxx_to_ngdp = nxx_to_ngdp - nmm_to_ngdp;


!postprocessor

    nmxx_to_ngdp = fob_pmm * mxx / ngdp;


!log-variables !all-but

    nmm_to_ngdp
    nxx_to_ngdp
    nmxx_to_ngdp


!variables(:commodity)

    "Long-run level of commodity supply" gg_qq
    "Global commodity demand" gg_q
    "Global excess demand in commodity market" gg_qexc
    "Global price of commodities" gg_pq
    "Global real price of commodities" gg_pq_to_pxx
    "Autonomous markup in real price of commodities !! $\mathit{aut}^\gg_\mathit{pq}$" gg_aut_pq


!log-variables !all-but


!parameters(:commodity :dynamic)

    "Excess demand elasticity of commodity prices !! $\iota_1^\gg$" gg_iota_1
    "A/R Long-run trend in commodity supply !! $\rho_\mathit{qq}^\gg$" gg_rho_qq
    gg_rho_aut_pq, gg_ss_aut_pq


!shocks(:commodity)

    "Shock to long-run level in commodity supply" gg_shk_qq
    "Shock to price of commodities" gg_shk_pq
    gg_shk_aut_pq


!equations(:commodity)

    "Long-run level of global commodity production"
    log(gg_qq) = + gg_rho_qq * log(gg_ss_roc_a * gg_ss_roc_nt * gg_qq{-1}) + (1 - gg_rho_qq) * log(gg_a * gg_nn * (&gg_q / &gg_a / &gg_nn)) + gg_shk_qq !! gg_qq = gg_q;


    "Log excess demand in commodity market"
    gg_qexc = gg_q / gg_qq !! gg_qexc = 1;


    "Commodity supply curve"
    gg_pq = gg_aut_pq * gg_pxx * gg_qexc^gg_iota_1 * exp(gg_shk_pq) !! gg_pq = gg_aut_pq * gg_pxx;


    "Autonomous markup in real commodity price"
    log(gg_aut_pq) = + gg_rho_aut_pq * log(gg_aut_pq{-1}) + (1 - gg_rho_aut_pq) * log(gg_ss_aut_pq) + gg_shk_aut_pq !! gg_aut_pq = gg_ss_aut_pq;


    "Global real prices of commodities"
    gg_pq_to_pxx = gg_pq / gg_pxx;


!variables(:global)

    "Global productivity trend component" gg_a
    "Global productivity trend component, Y/Y" gg_roc_a
    "Global population trend component" gg_nt
    "Global uncertainty in capital" gg_zk
    "Global uncertainty in profits" gg_zy
    "Global disruption to non-commodity trade" gg_dmm


!shocks(:global)

    "Shock to global productivity trend" gg_shk_a
    "Shock to global population trend" gg_shk_nn
    "Shock to global uncertainty in capital" gg_shk_zk
    "Shock to global uncertainty in profits" gg_shk_zy
    "Shock to global disruption to non-commodity trade" gg_shk_dmm


!parameters(:global :steady)

    "S/S Global productivity trend, Y/Y !! $\roc{a}^\gg_\ss$" gg_ss_roc_a
    "S/S Global population trend, Y/Y !! $\roc{\mathit{nt}}^\gg_\ss$" gg_ss_roc_nt
    "S/S Global uncertainty discount factor on capital !! $\mathit{zk}^\gg_\ss$" gg_ss_zk
    "S/S Global uncertainty discount factor on production cash flows !! $\mathit{zy}^\gg_\ss$" gg_ss_zy
    "S/S Global disruption to non-commodity trade !! $\mathit{dmm}^\gg_\ss$" gg_ss_dmm

    "Global intercept in Euler equation !! $\nu^\gg$" gg_nu


!parameters(:global :dynamic)

    "A/R in global productivity trend !! $\rho_a^\gg$" gg_rho_a
    "A/R in global population trend !! $\rho_\mathit{nt}^\gg$" gg_rho_nt
    "A/R in uncertainty discount factor on capital !! $\rho_\mathit{zk}^\gg$" gg_rho_zk
    "A/R in uncertainty discount factor on production cash flows !! $\rho_\mathit{zy}^\gg$" gg_rho_zy
    "A/R Global disruption to non-commodity trade !! $\rho_\mathit{dmm}^\gg$" gg_rho_dmm


!log-variables !all-but


!equations(:global)

    "Global productivity trend, Y/Y"
    log(gg_roc_a) = + gg_rho_a * log(gg_roc_a{-1}) + (1 - gg_rho_a)*(log(gg_ss_roc_a) + gg_shk_a) !! gg_roc_a = gg_ss_roc_a;


    "Global productivity trend"
    gg_a = gg_a{-1} * gg_roc_a !! gg_a = gg_a{-1} * gg_ss_roc_a;


    "Global population trend"
    (log(gg_nt)-log(gg_nt{-1})) = + gg_rho_a * (log(gg_nt{-1})-log(gg_nt{-1-1})) + (1-gg_rho_a) * (log(gg_ss_roc_nt) + gg_shk_nn) !! gg_nt = gg_nt{-1} * gg_ss_roc_nt;


    "Global uncertainty discount factor on capital"
    log(gg_zk) = gg_rho_zk*log(gg_zk{-1}) + (1-gg_rho_zk)*log(gg_ss_zk) + gg_shk_zk !! gg_zk = gg_ss_zk;


    "Global uncertainty discount factor on production cash flows"
    log(gg_zy) = gg_rho_zy*log(gg_zy{-1}) + (1-gg_rho_zy)*log(gg_ss_zy) + gg_shk_zy !! gg_zy = gg_ss_zy;


    "Global disruption to non-commodity trade"
    log(gg_dmm) = + gg_rho_dmm * log(gg_dmm{-1}) + (1 - gg_rho_dmm) * log(gg_ss_dmm) + gg_shk_dmm !! gg_dmm = gg_ss_dmm;


!variables

    "Global population" gg_nn
    "Global population, Y/Y" gg_roc_nn
    "Global index of non-commodity export prices" gg_pxx
    "Global nominal GDP" gg_ngdp
    "Global real GDP index, Y/Y" gg_roc_gdp
    "Global per-capita real GDP index, Y/Y" gg_roc_gdp_to_nn


!parameters

    "Forward capital adjustment cost parameter" xi_k
    "Forex market functioning" zeta_r


!equations

    nfa_to_ngdp = 0;

    nfa_to_ngdp_checksum = 0;

    pmm = fob_pmm * (1 + trm);

    fob_pmm = pxx;

    e = 1;

    rnfa = r{-1};

    "Global population"
    gg_nn = nn;

    "Global population, Y/Y" 
    gg_roc_nn = nn / nn{-1};

    - beta*vh{+1}*rh*pk - vh*xi_k*pk*log(k/(k{+1}/&roc_k)) + vh*pu*u + gg_zk*zk*beta*vh{+1}*(1-delta)*pk{+1} !! - beta*vh{+1}*rh*pk + vh*pu*u + gg_zk*zk*beta*vh{+1}*(1-delta)*pk{+1};
    

    "BOP FA corporate equity transactions to GDP ratio"
    bpfeq_to_ngdp = 0;

    "BOP CA corporate equity primary income to GDP ratio"
    bpceq_to_ngdp = 0;

    "Corporate equity portfolio"
    kk = pk * k;

    "Global index of non-commodity export prices"
    gg_pxx = pxx_rcy;

    "Global demand for commodities"
    gg_q = mq;


    "Global real GDP, Y/Y"
    gg_roc_gdp = roc_gdp;

    "Global per-capita real GDP, Y/Y"
    gg_roc_gdp_to_nn = roc_gdp_to_nn;

    "Global nominal GDP"
    gg_ngdp = ngdp;
